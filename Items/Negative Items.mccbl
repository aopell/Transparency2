@TYPE REPEAT
@CHAIN ON
@VERSION 1.9
:: "Heart Stopper"
	execute @e[type=Item,name=heartStopper,c=-1] ~ ~ ~ kill @e[type=Item,name=heartStopper,rm=1]
	clear @a[score_heartStopper_min=1] minecraft:barrier
	gamerule showDeathMessages false
	gamerule keepInventory false
	playsound entity.wither.death @a[score_heartStopper_min=1] ~ ~ ~ 1000000 2
	execute @a[score_heartStopper_min=1] ~ ~ ~ tellraw @a ["",{"selector":"@a[score_heartStopper_min=1]"},{"text":"'s heart suddenly stopped"}]
	kill @a[score_heartStopper_min=1]
	scoreboard players set @a @!heartStopper 0
	gamerule keepInventory true
	gamerule showDeathMessages true
;;
:: "Razer trap"
	scoreboard players tag @e[type=Item] add @!isTrap {Item:{id:minecraft:record_strad},Invulnerable:0b}
	//summon the controller
	scoreboard players remove @e[type=Item,tag=isTrap] @!mine 1
	entitydata @e[type=Item,score_mine=-1,tag=isTrap] {PickupDelay:32767}
	execute @e[type=Item,tag=isTrap,score_mine=-60] ~ ~ ~ summon AreaEffectCloud ~ ~ ~ {Radius:0.5f,Duration:1000000,Particle:take,CustomName:Razor,Tags:["razor"]}
	kill @e[type=Item,score_mine=-60]
	//trip the thing
	execute @e[type=AreaEffectCloud,name=Razor] ~ ~ ~ scoreboard players tag @a[r=0,m=2] add @!tripper
	execute @a[tag=tripper,m=2] ~ ~ ~ scoreboard players tag @e[type=AreaEffectCloud,name=Razor,r=1] add @!tripped
	//counting
	scoreboard players add @e[name=Razor,tag=tripped] @!razorCount 1
	//summon the razors
	execute @e[type=AreaEffectCloud,name=Razor,tag=tripped,score_razorCount_min=1,score_razorCount=1] ~ ~ ~ summon ArmorStand ~ ~-0.3 ~ {CustomName:Razor,Tags:["razor","tripped"],Invisible:1b,NoBasePlate:1b,Invulnerable:1b,NoGravity:1b,ShowArms:1b,Small:1b,ArmorItems:[{},{},{},{id:"minecraft:iron_sword",Count:1b}],HandItems:[{id:"minecraft:iron_sword",Count:1b},{id:"minecraft:iron_sword",Count:1b}],DisabledSlots:2039583,Pose:{Head:[90f,180f,180f],LeftArm:[67f,185f,128f],RightArm:[121f,232f,281f]}}
	execute @e[type=AreaEffectCloud,name=Razor,tag=tripped,score_razorCount_min=1,score_razorCount=1] ~ ~ ~ summon ArmorStand ~ ~.7 ~ {CustomName:Razor,Tags:["razor","tripped"],Invisible:1b,NoBasePlate:1b,Invulnerable:1b,NoGravity:1b,ShowArms:1b,Small:1b,ArmorItems:[{},{},{},{id:"minecraft:iron_sword",Count:1b}],HandItems:[{id:"minecraft:iron_sword",Count:1b},{id:"minecraft:iron_sword",Count:1b}],DisabledSlots:2039583,Pose:{Head:[50f,193f,307f],LeftArm:[146f,99f,158f],RightArm:[187f,198f,101f]}}
	execute @e[type=AreaEffectCloud,name=Razor,tag=tripped,score_razorCount_min=1,score_razorCount=1] ~ ~ ~ summon ArmorStand ~ ~ ~ {CustomName:Razor,Tags:["razor","tripped"],Invisible:1b,NoBasePlate:1b,Invulnerable:1b,NoGravity:1b,ShowArms:1b,Small:1b,ArmorItems:[{},{},{},{id:"minecraft:iron_sword",Count:1b}],HandItems:[{id:"minecraft:iron_sword",Count:1b},{id:"minecraft:iron_sword",Count:1b}],DisabledSlots:2039583,Pose:{Head:[113f,228f,307f],LeftArm:[96f,195f,191f],RightArm:[239f,85f,150f]}}
	//spinny
	tp @e[type=ArmorStand,tag=razor] ~ ~ ~ ~55 ~
	//particles
	execute @a[tag=tripper] ~ ~ ~ particle @!iconcrack_349_1 ~ ~1 ~ 0.3 0.7 0.3 0 5
	execute @a[tag=tripper] ~ ~ ~ particle @!iconcrack_423 ~ ~1 ~ 0.3 0.7 0.3 0 5
	execute @a[tag=tripper] ~ ~ ~ particle @!iconcrack_367 ~ ~1 ~ 0.3 0.7 0.3 0 5
	execute @a[tag=tripper] ~ ~ ~ particle crit ~ ~0.5 ~ 0.12 0.3 0.12 0 1
	execute @e[tag=!tripped,name=Razor] ~ ~ ~ particle reddust ~ ~ ~ .75 .75 1 1
	//kill the player
	effect @a[tag=tripper] minecraft:instant_damage 1 3 true
	scoreboard players tag @a remove @!tripper
	//kill the razors
	kill @e[name=Razor,type=ArmorStand,score_razorCount_min=30]
	kill @e[name=Razor,type=AreaEffectCloud,score_razorCount_min=30]
;;
