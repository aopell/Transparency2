@TYPE REPEAT
@CHAIN ON
@VERSION 1.9
scoreboard players test @!RespawnTokens @!gameSettings -1000000 -1
?scoreboard players set @!RespawnTokens @!gameSettings 0

//replaceitem entity @a[team=Lobby,m=1] slot.hotbar.7 written_book 1 0 {pages:["[\"\",{\"text\":\"Game Settings\",\"color\":\"blue\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"op only\",\"color\":\"dark_gray\"}]}}},{\"text\":\"\n\nRespawn Tokens: \",\"color\":\"light_purple\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"Amount of times a player can respawn\",\"color\":\"aqua\"}]}}},{\"score\":{\"name\":\"RespawnTokens\",\"objective\":\"gameSettings\"},\"color\":\"red\"},{\"text\":\"\n[-01]\",\"color\":\"red\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/scoreboard players remove RespawnTokens gameSettings 1\"}},{\"text\":\"  [+01]\",\"color\":\"dark_green\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/scoreboard players add RespawnTokens gameSettings 1\"}},{\"text\":\"\n[-05]\",\"color\":\"red\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/scoreboard players remove RespawnTokens gameSettings 5\"}},{\"text\":\"  [+05]\",\"color\":\"dark_green\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/scoreboard players add RespawnTokens gameSettings 5\"}},{\"text\":\"\n[-10]\",\"color\":\"red\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/scoreboard players remove RespawnTokens gameSettings 10\"}},{\"text\":\"  [+10]\",\"color\":\"dark_green\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/scoreboard players add RespawnTokens gameSettings 10\"}},{\"text\":\"\n[-25]\",\"color\":\"red\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/scoreboard players remove RespawnTokens gameSettings 25\"}},{\"text\":\"  [+25]\",\"color\":\"dark_green\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/scoreboard players add RespawnTokens gameSettings 25\"}},{\"text\":\"\n\nArmor Item: \",\"color\":\"light_purple\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"What players wear\",\"color\":\"aqua\"}]}}},{\"selector\":\"@e[type=ArmorStand,tag=armorItem]\",\"color\":\"black\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/scoreboard players add @e[name=GK,type=ArmorStand] settingArmorItem 1\"}},{\"text\":\"\nRandom Time: \",\"color\":\"light_purple\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"Randomizes the time of day\",\"color\":\"aqua\"}]}}},{\"selector\":\"@e[type=ArmorStand,tag=randTime]\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/scoreboard players add @e[name=GK,type=ArmorStand] settingRandTime 1\"},\"color\":\"none\"},{\"text\":\"\nItem Chest: \",\"color\":\"light_purple\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"A bonus chest that drops special items\",\"color\":\"aqua\"}]}}},{\"selector\":\"@e[type=ArmorStand,tag=itemChest]\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/scoreboard players add @e[name=GK,type=ArmorStand] settingItemChest 1\"},\"color\":\"none\"},{\"text\":\"\nGlowing Items: \",\"color\":\"light_purple\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"Adds the glowing effect to all items\",\"color\":\"aqua\"}]}}},{\"selector\":\"@e[type=ArmorStand,tag=glowItems]\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/scoreboard players add @e[name=GK,type=ArmorStand] settingGlowItems 1\"},\"color\":\"none\"}]"],title:Settings,author:Transparency}

//replaceitem entity @a[team=Lobby,m=2] slot.hotbar.7 air
//replaceitem entity @a[team=Lobby] slot.hotbar.8 written_book 1 0 {pages:["[\"\",{\"text\":\"Welcome \",\"color\":\"dark_purple\"},{\"selector\":\"@p\",\"color\":\"none\"},{\"text\":\"\nto\",\"color\":\"dark_purple\"},{\"text\":\" Transparency\",\"color\":\"dark_aqua\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"A fast-paced item-based PvP game\",\"color\":\"red\"}]}}},{\"text\":\"\n\nYou have won\n\",\"color\":\"gold\"},{\"score\":{\"name\":\"@p\",\"objective\":\"wins\"},\"color\":\"red\"},{\"text\":\" games\n\n\",\"color\":\"gold\"},{\"score\":{\"name\":\"RespawnTokens\",\"objective\":\"gameSettings\"},\"color\":\"red\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"Amount of times a player can respawn\",\"color\":\"aqua\"}]}}},{\"text\":\" Respawn Tokens\",\"color\":\"light_purple\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"Amount of times a player can respawn\",\"color\":\"aqua\"}]}}},{\"text\":\"\n\",\"color\":\"none\"},{\"score\":{\"name\":\"Players\",\"objective\":\"gameSettings\"},\"color\":\"red\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"Number of people that can play\",\"color\":\"aqua\"}]}}},{\"text\":\" Players\",\"color\":\"dark_green\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"Number of people than can play\",\"color\":\"aqua\"}]}}},{\"text\":\"\n\",\"color\":\"none\"},{\"score\":{\"name\":\"ApproxLengthMins\",\"objective\":\"gameSettings\"},\"color\":\"red\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"Estimated game length\",\"color\":\"aqua\"}]}}},{\"text\":\" Minute Game\",\"color\":\"dark_green\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"Estimated game length\",\"color\":\"aqua\"}]}}},{\"text\":\"\n\n\n\",\"color\":\"none\"},{\"text\":\"\n[Change Trail]\",\"color\":\"dark_purple\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/trigger changeTrail set 1\"},\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"Change your trail\",\"color\":\"aqua\"}]}}},{\"text\":\"\n[Start Game]\",\"color\":\"light_purple\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/scoreboard players tag @e[type=ArmorStand,name=GK] add randomizeTeams\"},\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"Start a game with random teams\",\"color\":\"aqua\"},{\"text\":\" op only\",\"color\":\"dark_gray\"}]}}}]"],title:Info,author:Transparency}

//replaceitem entity @a[team=!Lobby] slot.hotbar.8 written_book 1 0 {pages:["[\"\",{\"text\":\"Welcome \",\"color\":\"dark_purple\"},{\"selector\":\"@p\",\"color\":\"none\"},{\"text\":\"\nto\",\"color\":\"dark_purple\"},{\"text\":\" Transparency\",\"color\":\"dark_aqua\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"A fast-paced item-based PvP game\",\"color\":\"red\"}]}}},{\"text\":\"\n\nYou have won\n\",\"color\":\"gold\"},{\"score\":{\"name\":\"@p\",\"objective\":\"wins\"},\"color\":\"red\"},{\"text\":\" games\n\n\",\"color\":\"gold\"},{\"score\":{\"name\":\"RespawnTokens\",\"objective\":\"gameSettings\"},\"color\":\"red\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"Amount of times a player can respawn\",\"color\":\"aqua\"}]}}},{\"text\":\" Respawn Tokens\",\"color\":\"light_purple\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"Amount of times a player can respawn\",\"color\":\"aqua\"}]}}},{\"text\":\"\n\",\"color\":\"none\"},{\"score\":{\"name\":\"Players\",\"objective\":\"gameSettings\"},\"color\":\"red\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"Number of people that can play\",\"color\":\"aqua\"}]}}},{\"text\":\" Players\",\"color\":\"dark_green\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"Number of people than can play\",\"color\":\"aqua\"}]}}},{\"text\":\"\n\",\"color\":\"none\"},{\"score\":{\"name\":\"ApproxLengthMins\",\"objective\":\"gameSettings\"},\"color\":\"red\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"Estimated game length\",\"color\":\"aqua\"}]}}},{\"text\":\" Minute Game\",\"color\":\"dark_green\",\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"Estimated game length\",\"color\":\"aqua\"}]}}},{\"text\":\"\n\n\",\"color\":\"none\"},{\"text\":\"\n[Leave Team]\",\"color\":\"dark_aqua\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/trigger leaveTeam set 1\"}},{\"text\":\"\n[Change Trail]\",\"color\":\"dark_purple\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/trigger changeTrail set 1\"},\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"Change your trail\",\"color\":\"aqua\"}]}}},{\"text\":\"\n[Start Game]\",\"color\":\"light_purple\",\"clickEvent\":{\"action\":\"run_command\",\"value\":\"/scoreboard players tag @e[type=ArmorStand,name=GK] add randomizeTeams\"},\"hoverEvent\":{\"action\":\"show_text\",\"value\":{\"text\":\"\",\"extra\":[{\"text\":\"Start a game with random teams\",\"color\":\"aqua\"},{\"text\":\" op only\",\"color\":\"dark_gray\"}]}}}]"],title:Info,author:Transparency}

:: "Armor Item"
//summon ArmorStand ~ ~ ~ {Tags:[armorItem],Invisible:1b,Invincible:1b}
	scoreboard players set @e[type=ArmorStand,name=GK,score_settingArmorItem_min=2] @!settingArmorItem 0
	execute @e[type=ArmorStand,name=GK,score_settingArmorItem_min=1] ~ ~ ~ entitydata @e[tag=armorItem] {CustomName:Elytra}
	execute @e[type=ArmorStand,name=GK,score_settingArmorItem=0] ~ ~ ~ entitydata @e[tag=armorItem] {CustomName:Chestplate}
;;
:: "Item Chest"
//summon ArmorStand ~ ~ ~ {Tags:[itemChest],Invisible:1b,Invincible:1b}
	scoreboard players set @e[type=ArmorStand,name=GK,score_settingItemChest_min=2] @!settingItemChest 0 
	execute @e[type=ArmorStand,name=GK,score_settingItemChest=0] ~ ~ ~ scoreboard teams join @!settingOff @e[tag=itemChest]
	execute @e[type=ArmorStand,name=GK,score_settingItemChest_min=1] ~ ~ ~ scoreboard teams join @!settingOn @e[tag=itemChest]
	execute @e[type=ArmorStand,name=GK,score_settingItemChest_min=1] ~ ~ ~ entitydata @e[tag=itemChest] {CustomName:On}
	execute @e[type=ArmorStand,name=GK,score_settingItemChest=0] ~ ~ ~ entitydata @e[tag=itemChest] {CustomName:Off}
	execute @e[type=ArmorStand,name=GK,score_settingItemChest=0] ~ ~ ~ blockdata -7 1 -4 {auto:0b}
	execute @e[type=ArmorStand,name=GK,score_settingItemChest_min=1] ~ ~ ~ blockdata -7 1 -4 {auto:1b}
;;
:: "Random Time"
//summon ArmorStand ~ ~ ~ {Tags:[randTime],Invisible:1b,Invincible:1b}
	scoreboard players set @e[type=ArmorStand,name=GK,score_settingRandTime_min=2] @!settingRandTime 0
	execute @e[type=ArmorStand,name=GK,score_settingRandTime=0] ~ ~ ~ scoreboard teams join @!settingOff @e[tag=randTime]
	execute @e[type=ArmorStand,name=GK,score_settingRandTime_min=1] ~ ~ ~ scoreboard teams join @!settingOn @e[tag=randTime]
	execute @e[type=ArmorStand,name=GK,score_settingRandTime=0] ~ ~ ~ time set 6000
	execute @e[type=ArmorStand,name=GK,score_settingRandTime_min=1] ~ ~ ~ entitydata @e[tag=randTime] {CustomName:On}
	execute @e[type=ArmorStand,name=GK,score_settingRandTime=0] ~ ~ ~ entitydata @e[tag=randTime] {CustomName:Off}
;;
:: "Glowing Items"
//summon ArmorStand ~ ~ ~ {Tags:[glowItems],Invisible:1b,Invincible:1b}
	scoreboard players set @e[type=ArmorStand,name=GK,score_settingGlowItems_min=2] @!settingGlowItems 0
	execute @e[type=ArmorStand,name=GK,score_settingGlowItems=0] ~ ~ ~ scoreboard teams join @!settingOff @e[tag=glowItems]
	execute @e[type=ArmorStand,name=GK,score_settingGlowItems_min=1] ~ ~ ~ scoreboard teams join @!settingOn @e[tag=glowItems]
	execute @e[type=ArmorStand,name=GK,score_settingGlowItems_min=1] ~ ~ ~ entitydata @e[tag=glowItems] {CustomName:On}
	execute @e[type=ArmorStand,name=GK,score_settingGlowItems=0] ~ ~ ~ entitydata @e[tag=glowItems] {CustomName:Off}
	execute @e[type=ArmorStand,name=GK,score_settingGlowItems=0] ~ ~ ~ blockdata -10 1 -4 {auto:0b}
	execute @e[type=ArmorStand,name=GK,score_settingGlowItems_min=1] ~ ~ ~ blockdata -10 1 -4 {auto:1b}
;;
:: "Estimated Length"
	scoreboard players set @!Players @!gameSettings 0
	execute @a[team=Lobby,m=!3] ~ ~ ~ scoreboard players add @!Players @!gameSettings 1 
	scoreboard players operation @!Players @!calc = @!Players @!gameSettings
	scoreboard players operation @!Players @!calc += @!Thirty @!calc
	scoreboard players operation @!Tokens @!calc = @!RespawnTokens @!gameSettings
	scoreboard players operation @!Tokens @!calc *= @!Twenty @!calc
	scoreboard players operation @!GameLength @!gameSettings = @!Tokens @!calc
	scoreboard players operation @!GameLength @!gameSettings /= @!Players @!calc

;;

